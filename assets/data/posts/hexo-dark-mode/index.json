{"hash":"047f85ec51bfa3a4aacb1127251e2bb4591e5dd7","data":{"post":{"title":"Hexo Fluid 暗黑模式","path":"/posts/hexo-dark-mode/","date":"April 2. 2020","timeToRead":2,"cjkWordCount":919,"cjkReadTime":4,"tags":[{"id":"DarkMode","title":"DarkMode","path":"/tag/DarkMode/"},{"id":"Hexo","title":"Hexo","path":"/tag/Hexo/"}],"cate":{"id":"tech","title":"tech","path":"/category/tech/"},"description":"适用于 Hexo 的暗黑模式，推荐在主题没有暗色模式的情况下使用","published":true,"content":"<p>大概花了一个晚上搞暗黑模式，之后几天陆续优化了下\n目前博客已经基本上适配完成了\n目前是三种方案（优先级递减）</p>\n<ol>\n<li>媒体查询</li>\n<li>定时开启</li>\n<li>\n<p>localStorage/sessionStorage 查询</p>\n<!--more-->\n<p><code>媒体查询</code>，判断系统是否处于暗黑模式，支持大部分系统\nWin10 需要浏览器开启深色模式\nAndroid 同理，需要浏览器支持手机开启夜间模式的时候将自身切换到神色模式，目前 Chrome 支持，Edge 不支持，其他没测\niOS、MacOS 上的 Safari 也支持</p>\n</li>\n</ol>\n<p><code>定时开启</code>，在规定时间自动开启，如果在该时间段内取消了暗黑模式，能一直保持</p>\n<p><code>localStorage/sessionStorage 查询</code>，能一直保持某一个模式的依赖</p>\n<h3 id=\"html\"><a href=\"#html\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>HTML</h3>\n<p>在 <code>\\themes\\fluid\\layout\\layout.ejs</code> 中找到 <code>&#x3C;body></code>，在其之后加入如下代码</p>\n<pre class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dark<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>switchDarkMode()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">var</span> isNight <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">22</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getHours</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme: dark)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">matches</span> <span class=\"token operator\">||</span> isNight <span class=\"token operator\">||</span> <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>isNight<span class=\"token operator\">&amp;&amp;</span><span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'noDark'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHTML</span> <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"body\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token string\">\"🌙\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"🌞\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"admonition admonition-warning\"><div class=\"admonition-heading\"><h5><div class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"16\" viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z\"></path></svg></div>注意</h5></div><div class=\"admonition-content\"><p>一定紧跟在 <code>body</code> 标签之后，否则会出现闪烁</p></div></div>\n<h3 id=\"js\"><a href=\"#js\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JS</h3>\n<p>然后随便找个 JS 把下面代码加进去，直接加到 <code>&#x3C;/body></code> 之前也行</p>\n<pre class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">//点击事件</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">switchDarkMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">hasClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#dark\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">html</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"🌞\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'noDark'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#dark\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">html</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"🌙\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dark'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'noDark'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"css\"><a href=\"#css\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CSS</h3>\n<p>在自定义 CSS 中加入代码</p>\n<div class=\"admonition admonition-tip\"><div class=\"admonition-heading\"><h5><div class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"16\" viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"></path></svg></div>Tip</h5></div><div class=\"admonition-content\"><p>可以用 <code>stylus</code>，能少些写\n但是引入时记得后缀还是 <code>.css</code> 不要变</p></div></div>\n<p>下面是我的样式代码，基本覆盖所有内容，根据自身情况修改</p>\n<pre class=\"language-stylus line-numbers\"><code class=\"language-stylus\"><span class=\"token selector\"><span class=\"token comment\">/* 切换按钮 */</span>\n#dark</span>\n  <span class=\"token property-declaration\"><span class=\"token property\">cursor</span> pointer</span>\n  <span class=\"token property-declaration\"><span class=\"token property\">position</span> fixed</span>\n  <span class=\"token property-declaration\"><span class=\"token property\">right</span> <span class=\"token number\">40</span><span class=\"token unit\">px</span></span>\n  <span class=\"token property-declaration\"><span class=\"token property\">bottom</span> <span class=\"token number\">98</span><span class=\"token unit\">px</span></span>\n  <span class=\"token property-declaration\"><span class=\"token property\">width</span> <span class=\"token number\">16</span><span class=\"token unit\">px</span></span>\n  <span class=\"token property-declaration\"><span class=\"token property\">height</span> <span class=\"token number\">14</span><span class=\"token unit\">px</span></span>\n  <span class=\"token property-declaration\"><span class=\"token property\">z-index</span> <span class=\"token number\">100</span></span>\n  <span class=\"token property-declaration\"><span class=\"token property\">font-size</span> <span class=\"token number\">20</span><span class=\"token unit\">px</span></span>\n\n<span class=\"token comment\">/*暗黑模式*/</span>\n<span class=\"token punctuation\">.</span>dark\n\n  <span class=\"token selector\"><span class=\"token comment\">/* 主体 */</span>\n  #board</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#282c34</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n  \n  <span class=\"token selector\">img  </span>\n    <span class=\"token property-declaration\"><span class=\"token property\">filter</span> <span class=\"token func\"><span class=\"token function\">brightness</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token unit\">%</span><span class=\"token punctuation\">)</span></span></span>\n\n  <span class=\"token selector\">p\n  .index-info a  </span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span> <span class=\"token important\">!important</span></span>\n\n  <span class=\"token selector\">.markdown-body</span>\n    <span class=\"token selector\">h1<span class=\"token punctuation\">,</span>h2<span class=\"token punctuation\">,</span>h3<span class=\"token punctuation\">,</span>h4<span class=\"token punctuation\">,</span>h5<span class=\"token punctuation\">,</span>h6<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>li  </span>\n      <span class=\"token property-declaration\"><span class=\"token property\">color</span><span class=\"token punctuation\">:</span><span class=\"token hexcode\">#a09c9c</span> <span class=\"token important\">!important</span></span>\n\n  <span class=\"token selector\"><span class=\"token comment\">/* 顶栏 */</span>\n  .navbar-col-show\n  .top-nav-collapse  </span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#282c34</span></span>\n\n  <span class=\"token selector\">.navbar a</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span> <span class=\"token important\">!important</span></span>\n\n  <span class=\"token selector\">.animated-icon span   <span class=\"token comment\">/* 手机端 */</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* page-number */</span>\n  .pagination a:hover\n  .pagination .current  </span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#6b6b6b</span><span class=\"token number\">73</span><span class=\"token punctuation\">;</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* 打字机 */</span>\n  #subtitle\n  .dark.typed-cursor--blink\n  .scroll-down-arrow</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#dfdfdf</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* back to top */</span>\n  #scroll-top-button</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#282c34</span></span>\n\n    <span class=\"token selector\">i</span>\n      <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* Toc */</span>\n  .tocbot-list a</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n\n  <span class=\"token selector\">.tocbot-active-link\n  footer a:hover</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#1abc9c</span> <span class=\"token important\">!important</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* footer */</span>\n  footer\n  footer a</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* 归档页 */</span>\n  .list-group-item</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#282c34</span></span>\n\n  <span class=\"token selector\">.list-group-item:hover\n  .tagcloud a:hover</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#46484d</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* 友链页 */</span>\n  .links</span>\n    <span class=\"token selector\">.card  </span>\n      <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#282c34</span></span>\n\n    <span class=\"token selector\">.card-body:hover  </span>\n      <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#46484d</span></span>\n\n    <span class=\"token selector\">.link-title\n    .link-intro  </span>\n      <span class=\"token property-declaration\"><span class=\"token property\">color</span> <span class=\"token hexcode\">#a09c9c</span></span>\n\n\n  <span class=\"token selector\"><span class=\"token comment\">/* note标签 可能这配色有点丑 */</span>\n  .note-info</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#3b5359</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">border-color</span> <span class=\"token hexcode\">#006d80</span></span>\n\n  <span class=\"token selector\">.note-danger</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#783f42</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">border-color</span> <span class=\"token hexcode\">#670009</span></span>\n\n  <span class=\"token selector\">.note-success</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#2a3e2e</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">border-color</span> <span class=\"token hexcode\">#005915</span></span>\n\n  <span class=\"token selector\">.note-warning</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#5b543e</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">border-color</span> <span class=\"token hexcode\">#846500</span></span>\n\n  <span class=\"token selector\">.note-primary</span>\n    <span class=\"token property-declaration\"><span class=\"token property\">background-color</span> <span class=\"token hexcode\">#455a6f</span></span>\n    <span class=\"token property-declaration\"><span class=\"token property\">border-color</span> <span class=\"token hexcode\">#004188</span></span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"localstorage-还是-sessionstorage\"><a href=\"#localstorage-%E8%BF%98%E6%98%AF-sessionstorage\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>localStorage 还是 sessionStorage</h3>\n<p>仔细观察刚刚的 js 代码，在其中用的是 localStorage\n除了 localStorage，你还可以用 sessionStorage\n两者的区别也非常简单</p>\n<blockquote>\n<p>localStorage：除非被手动清除，否则将会永久保存。\nsessionStorage： 仅在当前网页会话下有效，关闭页面或浏览器后就会被清除。</p>\n</blockquote>\n<p>举个简单例子，如果现在是白天（即没有触发夜间自动开启暗黑模式）\n你手动点击切换成了暗黑模式，当你关闭当前网页再次进入时\n如果你用的是 localStorage，那么此时就还是暗黑模式\n而如果你用的是 sessionStorage，此时就不是暗黑模式了</p>\n<p>两者的使用方法相同\n直接替换就可以了</p>\n<div class=\"admonition admonition-caution\"><div class=\"admonition-heading\"><h5><div class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></div><a href=\"https://crosschannel.cc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">track13</a> 指出</h5></div><div class=\"admonition-content\"><p>sessionStorage 在手机浏览器上问题很多，不推荐使用</p></div></div>\n<p>下面是支持该特性的最低版本\n<figure><img src=\"https://cos.royce2003.top/41212/01.webp-default\" alt=\"支持情况\"><figcaption>支持情况</figcaption></figure></p>\n<p>可以在浏览器控制台中查看他们的值\n<figure><img src=\"https://cos.royce2003.top/41212/02.webp-default\" alt=\"查看\"><figcaption>查看</figcaption></figure></p>\n<hr>\n<h3 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>参考</h3>\n<ol>\n<li><a href=\"https://crosschannel.cc/daily/hexo%E6%B7%BB%E5%8A%A0%E6%9A%97%E8%89%B2%E6%A8%A1%E5%BC%8F.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">面向小白的Hexo添加暗色模式教程 | 宅日记</a></li>\n</ol>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/hexo-dark-mode.a209973.7c0cd696151d288cd24e7c37d5cb3c78.png","size":{"width":1280,"height":400},"sizes":"(max-width: 1280px) 100vw, 1280px","srcset":["/assets/static/hexo-dark-mode.a67b0b2.7c0cd696151d288cd24e7c37d5cb3c78.png 480w","/assets/static/hexo-dark-mode.a209973.7c0cd696151d288cd24e7c37d5cb3c78.png 1280w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1280 400' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a0b1e28dd81e2634e243c84b48088226'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a0b1e28dd81e2634e243c84b48088226)' width='1280' height='400' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAUCAIAAACyFKxoAAAACXBIWXMAAAsSAAALEgHS3X78AAAGL0lEQVRIx81X21MaZxTPS6fTl/Sx04fOdNqZNHZEmTQaTcQrNwk3EQTvVmOI8Y4XFBEUFUFE2F1crgILu8vNS2Kb1Mxk0pl2pn9Xzy5ipN6wD01nvoeP/c6ePb/z%2b51zPu6gMQpjF8ou7IqFXthcb3NbV2g8icRJLHqZqziFxa9yRd7B2GNf3qiw%2bS9/QhAoSYb39kPBLE6n4ScWJ4uMY5QvdoWrGHXn8rTFS2MgXgID17pCEqQ/mY25jqw9Ho32pcnl9iczeIKFATYE5YvSUeQQILER01gBQ36htwbAvvPxNJ8e8PvvABBUGMt5RqOdrWMP%2bU%2b5fHG1UKbTj9uxYJDK7hIpFKiI0tTmm5A/h8RIT4Rg%2bSkGULqE8nQXYDAssySS3r0EFruNhFhJIIkksfHKpkEfNj/lCIU1YuUjsaJaJOc2tfKk6qEZozO45yfSCJEM%2b/dDnlw4lXv3%2b19%2blpxiCZ2hiVNoMUEX%2bCIDZGYvfRDLHAWSmbNkHLx9HySz3mgSK80VcxolcTqzOuUxNq6OKa0CaTdXKK4SympEikdieQVfVCfSmPpcqIPASNoTTdDHb7LH716dfCByr4o%2bdCsGYEXTh5njk%2bwvJ9HMETxEoknq8Ne3H/4k9l/7CDqvpVJcAYBgNmeacVgEdqwzsiJxDyrmn0jaOQJhbatqUDm3JNtc1tnMJidOZdBoMkTl4IsgIfjKhSIuMW2sSCABDIDjk3zEnr1E%2bvg32B%2b%2bff/m/R9owexmVwSFBBLjHYsj9VPY8zA%2bEHXJfSapY0i1MCe16WsmZZz2Se2s1eIOpHOAFjIFQs0r9kIR3wig8A5oBqQSyx4RuddQZGw9kHgiBYQAJMgQcmpJMp3xRgD%2bxPyQbbB%2brLPu%2bZJ6M/AyjmiDBp5JWa5puSeRVbTPdi0aJles2z4g1k9m/Mk0vHX7IiZSeDINyYY0MH2D1R9UAsJudhnZME7BhnkCcYOECJppICy8a4o4cni0aHBM85Z0vCFd44sRycKq0tVe0SUqk0l%2bVEo5KuPAsr7HUF3dYLQ5ekYNL4zLjH7O%2bbxBQkyxE7TLv7fqxjxhAmfacwoyASHCE2jVu4nUFh7ewiOwX/fi4Itp4cm0OxjbQAMBKse280sqGIvTO8F4v2GuTTyEKMKqn7of32tW1fa11Q/IKjSS%2b4rWH%2bSyctV8r1nfNX337pfCtg5ucyt0WCcegY%2beJ%2bFaBmIkhLvs3Jky2xbWnZYt76obXdlGTfZtg3V9adMNBhaXd3hq3uELDoxObyB%2bOAI8U0urs9YNALmyjQAVWLFnEBgkAjq9SNfbJOiYVa0/a5gQV7TxyoR19/kyjlpSoWpp1EgaO41DFq1muOybSl6z4pFE%2bZAvnVmx56Vb0iTOCwPihqANlnX9zOLInGl8wWLb8Q1PG2HBqR0N6A0LsKaX16bMq8Y158CoYcm%2bPbZg%2bXnMMGPdyGfrgnDJ3UQalG2wbog7%2bmua5E8fd2qq%2blorVZJyVT1f1dLZz23giwRaWY1OXq550qKskbaV8wTPDIuh1D7yjzZ6jYQgRMj65NKK1eWds20CjHmbYwPFZ1fsEJw7FFtHcOOaY9npAYrMDjcAMDs9c6ubsAH7Ne9uvutdOlKAh3DqAJwMzhhrpW2P6%2bXqx/3Kio6yB3Vff3fv88%2b%2bUHC0ak6XpEzeyJVyeQKhptvpjzDVWKqEChcpQIwnU6f3kBiJnGtKWL4RJdNQ3HnX%2bOmkpNlmn7zUs6/Q0CKpfdB0kM5BzWj0o1UCWW2DrJLH/%2brb78ureO0PunprnynLtMPSCYW622TfCqf2z/ssllCegbOrS/zc5uLduOiU/HhHiuXVQucfAoyP2Tp3KTqz9DKpScNwBNhAiGnTLekZeNAiqRYrYKipOLrhunG9eOKF2mB2uLYDe6fNrZjJT3ydZjs1M8LhesIUaJQcN9sa23TcJpGkWjsrXV6ZcPaKnq95oBPGd2/VRi9rf0Wb621u4Yolh5lTcSpC74fofVcg2jcxI5L3qqV6XqW0p2UYRthVM/F/AKAgBlhhOocTKZgnAGPNi7cPjohVPYuWLbbArgDwyf%2bRnf8JfwBARXupgxCVharwEdROJO6nMlcPK%2bpv6umPJZtcGSsAAAAASUVORK5CYII=' /%3e%3c/svg%3e"}},"previous":{"title":"加速网页加载？我选择对图片下手","path":"/posts/use-webp/"},"next":{"title":"Hexo Fluid 瞎折腾","path":"/posts/hexo-fluid/"}},"context":{"previousElement":"47840de4de94e3b2941592d68d264b30","nextElement":"c9b51a7373388ed11cc16d90c8803df5","id":"5d6ea3d3fc80bc4bae43f70873cb3662"}}